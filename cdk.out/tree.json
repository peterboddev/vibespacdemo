{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.218.0"},"children":{"InsuranceQuotation-CICD-dev":{"id":"InsuranceQuotation-CICD-dev","path":"InsuranceQuotation-CICD-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.218.0"},"children":{"Pipeline":{"id":"Pipeline","path":"InsuranceQuotation-CICD-dev/Pipeline","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"PipelineArtifacts":{"id":"PipelineArtifacts","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineArtifacts","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineArtifacts/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":{"Fn::Join":["",["insurance-quotation-pipeline-dev-",{"Ref":"AWS::AccountId"}]]},"lifecycleConfiguration":{"rules":[{"expirationInDays":30,"id":"DeleteOldArtifacts","noncurrentVersionExpiration":{"noncurrentDays":7},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}],"versioningConfiguration":{"status":"Enabled"}}}}}},"PipelineNotifications":{"id":"PipelineNotifications","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineNotifications","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineNotifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Insurance Quotation Pipeline Notifications - dev","tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}],"topicName":"insurance-quotation-pipeline-dev"}}}}},"BuildLogGroup":{"id":"BuildLogGroup","path":"InsuranceQuotation-CICD-dev/Pipeline/BuildLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/BuildLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/codebuild/insurance-quotation-dev","retentionInDays":7,"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}]}}}}},"CodeBuildRole":{"id":"CodeBuildRole","path":"InsuranceQuotation-CICD-dev/Pipeline/CodeBuildRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportCodeBuildRole":{"id":"ImportCodeBuildRole","path":"InsuranceQuotation-CICD-dev/Pipeline/CodeBuildRole/ImportCodeBuildRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/CodeBuildRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"},"description":"CodeBuild role for Insurance Quotation dev","policies":[{"policyName":"BuildPolicy","policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["PipelineBuildLogGroup15A88889","Arn"]},":*"]]}},{"Action":["s3:GetObject","s3:GetObjectVersion","s3:PutObject"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]},"/*"]]}},{"Action":"s3:ListBucket","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]}},{"Action":["apigateway:*","cloudformation:*","ec2:*","elasticache:*","iam:*","lambda:*","logs:*","rds:*","s3:*","secretsmanager:*","sts:AssumeRole"],"Effect":"Allow","Resource":"*"},{"Action":["ssm:GetParameter","ssm:GetParameters"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/cdk-bootstrap/*"]]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:secretsmanager:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":secret:github-token*"]]}}],"Version":"2012-10-17"}}],"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"InsuranceQuotation-CICD-dev/Pipeline/CodeBuildRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/CodeBuildRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]},"/*"]]}]},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineBuildLogGroup15A88889","Arn"]}},{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:logs:us-east-1:450683699755:log-group:/aws/codebuild/",{"Ref":"PipelineBuildProject9D447FA8"},":*"]]},{"Fn::Join":["",["arn:aws:logs:us-east-1:450683699755:log-group:/aws/codebuild/",{"Ref":"PipelineBuildProject9D447FA8"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:codebuild:us-east-1:450683699755:report-group/",{"Ref":"PipelineBuildProject9D447FA8"},"-*"]]}}],"Version":"2012-10-17"},"policyName":"PipelineCodeBuildRoleDefaultPolicy241DE1F1","roles":[{"Ref":"PipelineCodeBuildRole42BB8656"}]}}}}}}},"BuildProject":{"id":"BuildProject","path":"InsuranceQuotation-CICD-dev/Pipeline/BuildProject","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.Project","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/BuildProject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"S3","location":{"Ref":"PipelinePipelineArtifacts46D65C74"},"namespaceType":"BUILD_ID","packaging":"ZIP","overrideArtifactName":true},"cache":{"type":"NO_CACHE"},"description":"Build project for Insurance Quotation API - dev","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL","environmentVariables":[{"name":"ENVIRONMENT","type":"PLAINTEXT","value":"dev"},{"name":"AWS_DEFAULT_REGION","type":"PLAINTEXT","value":{"Ref":"AWS::Region"}},{"name":"AWS_ACCOUNT_ID","type":"PLAINTEXT","value":{"Ref":"AWS::AccountId"}}]},"logsConfig":{"cloudWatchLogs":{"status":"ENABLED","groupName":{"Ref":"PipelineBuildLogGroup15A88889"}}},"name":"insurance-quotation-dev","serviceRole":{"Fn::GetAtt":["PipelineCodeBuildRole42BB8656","Arn"]},"source":{"type":"NO_SOURCE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"env\": {\n    \"variables\": {\n      \"NODE_ENV\": \"production\"\n    }\n  },\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"20\"\n      },\n      \"commands\": [\n        \"echo \\\"Installing dependencies...\\\"\",\n        \"npm ci --only=production\",\n        \"npm install -g aws-cdk@latest\",\n        \"npm install -g typescript@latest\"\n      ]\n    },\n    \"pre_build\": {\n      \"commands\": [\n        \"echo \\\"Pre-build phase started\\\"\",\n        \"npm install --only=dev\",\n        \"npx ts-node scripts/generate-routes.ts || echo \\\"Route generation skipped\\\"\",\n        \"npm run build\",\n        \"npm test -- --passWithNoTests --coverage=false\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"echo \\\"Build phase started\\\"\",\n        \"TARGET_ENV=${ENVIRONMENT:-dev}\",\n        \"echo \\\"Target environment: $TARGET_ENV\\\"\",\n        \"cdk bootstrap --context environment=$TARGET_ENV || echo \\\"Bootstrap exists\\\"\",\n        \"cdk synth --context environment=$TARGET_ENV\"\n      ]\n    },\n    \"post_build\": {\n      \"commands\": [\n        \"echo \\\"Build completed successfully!\\\"\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"files\": [\n      \"**/*\"\n    ]\n  }\n}"},"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}],"timeoutInMinutes":30}}}}},"DeployRoledev":{"id":"DeployRoledev","path":"InsuranceQuotation-CICD-dev/Pipeline/DeployRoledev","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportDeployRoledev":{"id":"ImportDeployRoledev","path":"InsuranceQuotation-CICD-dev/Pipeline/DeployRoledev/ImportDeployRoledev","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/DeployRoledev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Deploy role for dev environment","policies":[{"policyName":"DeployPolicy","policyDocument":{"Statement":[{"Action":"*","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}}],"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"InsuranceQuotation-CICD-dev/Pipeline/DeployRoledev/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/DeployRoledev/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:logs:us-east-1:450683699755:log-group:/aws/codebuild/",{"Ref":"PipelineDeployProjectdev24D74B39"},":*"]]},{"Fn::Join":["",["arn:aws:logs:us-east-1:450683699755:log-group:/aws/codebuild/",{"Ref":"PipelineDeployProjectdev24D74B39"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:codebuild:us-east-1:450683699755:report-group/",{"Ref":"PipelineDeployProjectdev24D74B39"},"-*"]]}},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineDeployRoledevDefaultPolicy37905E66","roles":[{"Ref":"PipelineDeployRoledev4A6FE50F"}]}}}}}}},"DeployProjectdev":{"id":"DeployProjectdev","path":"InsuranceQuotation-CICD-dev/Pipeline/DeployProjectdev","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.Project","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/DeployProjectdev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"NO_ARTIFACTS"},"cache":{"type":"NO_CACHE"},"description":"Deploy project for dev environment","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL","environmentVariables":[{"name":"TARGET_ENVIRONMENT","type":"PLAINTEXT","value":"dev"}]},"name":"insurance-quotation-deploy-dev","serviceRole":{"Fn::GetAtt":["PipelineDeployRoledev4A6FE50F","Arn"]},"source":{"type":"NO_SOURCE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"runtime-versions\": {\n        \"nodejs\": \"20\"\n      },\n      \"commands\": [\n        \"echo \\\"Installing dependencies for deployment...\\\"\",\n        \"npm ci\",\n        \"npm install -g aws-cdk\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"echo \\\"Deploying to $TARGET_ENVIRONMENT environment...\\\"\",\n        \"npm run cdk:deploy -- --require-approval never\"\n      ]\n    }\n  }\n}"},"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}],"timeoutInMinutes":20}}}}},"Pipeline":{"id":"Pipeline","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.218.0","metadata":[]},"children":{"Role":{"id":"Role","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelinePipelineArtifacts46D65C74","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineBuildCodePipelineActionRole183A2F80","Arn"]},{"Fn::GetAtt":["PipelineDeployDevDeployToDevCodePipelineActionRoleC491A8E8","Arn"]}]}],"Version":"2012-10-17"},"policyName":"PipelineRoleDefaultPolicy7BDC1ABB","roles":[{"Ref":"PipelineRoleB27FAA37"}]}}}}}}},"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"PipelinePipelineArtifacts46D65C74"}},"name":"insurance-quotation-dev","restartExecutionOnUpdate":true,"roleArn":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]},"stages":[{"name":"Source","actions":[{"name":"GitHub_Source","outputArtifacts":[{"name":"Source"}],"actionTypeId":{"category":"Source","version":"1","owner":"ThirdParty","provider":"GitHub"},"configuration":{"Owner":"peterboddev","Repo":"vibespacdemo","Branch":"main","OAuthToken":"{{resolve:secretsmanager:github-token:SecretString:token::}}","PollForSourceChanges":true},"runOrder":1}]},{"name":"Build","actions":[{"name":"Build","inputArtifacts":[{"name":"Source"}],"outputArtifacts":[{"name":"Build"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineBuildProject9D447FA8"},"EnvironmentVariables":"[{\"name\":\"STAGE\",\"type\":\"PLAINTEXT\",\"value\":\"build\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineBuildCodePipelineActionRole183A2F80","Arn"]}}]},{"name":"DeployDev","actions":[{"name":"DeployToDev","inputArtifacts":[{"name":"Build"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineDeployProjectdev24D74B39"},"EnvironmentVariables":"[{\"name\":\"STAGE\",\"type\":\"PLAINTEXT\",\"value\":\"deploy-dev\"},{\"name\":\"TARGET_ENVIRONMENT\",\"type\":\"PLAINTEXT\",\"value\":\"dev\"}]"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineDeployDevDeployToDevCodePipelineActionRoleC491A8E8","Arn"]}}]}],"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}]}}},"Source":{"id":"Source","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"GitHub_Source":{"id":"GitHub_Source","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Source/GitHub_Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Build":{"id":"Build","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Build":{"id":"Build","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Build/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Build/Build/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Build/Build/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Build/Build/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]}}}],"Version":"2012-10-17"},"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Build/Build/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/Build/Build/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineBuildProject9D447FA8","Arn"]}}],"Version":"2012-10-17"},"policyName":"PipelineBuildCodePipelineActionRoleDefaultPolicyF1BA3038","roles":[{"Ref":"PipelineBuildCodePipelineActionRole183A2F80"}]}}}}}}}}}}},"DeployDev":{"id":"DeployDev","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/DeployDev","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"DeployToDev":{"id":"DeployToDev","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/DeployDev/DeployToDev","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/DeployDev/DeployToDev/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.218.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/DeployDev/DeployToDev/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.218.0","metadata":[]}},"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/DeployDev/DeployToDev/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]}}}],"Version":"2012-10-17"},"tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/DeployDev/DeployToDev/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/Pipeline/DeployDev/DeployToDev/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineDeployProjectdev24D74B39","Arn"]}}],"Version":"2012-10-17"},"policyName":"PipelineDeployDevDeployToDevCodePipelineActionRoleDefaultPolicy838A4978","roles":[{"Ref":"PipelineDeployDevDeployToDevCodePipelineActionRoleC491A8E8"}]}}}}}}}}}}}}},"PipelineFailureAlarm":{"id":"PipelineFailureAlarm","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineFailureAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineFailureAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"PipelinePipelineNotificationsD09EF7F8"}],"alarmDescription":"Alarm when pipeline fails","alarmName":"insurance-quotation-pipeline-failure-dev","tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"PipelineName","value":{"Ref":"Pipeline9850B417"}}],"evaluationPeriods":1,"metricName":"PipelineExecutionFailure","namespace":"AWS/CodePipeline","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"BuildFailureAlarm":{"id":"BuildFailureAlarm","path":"InsuranceQuotation-CICD-dev/Pipeline/BuildFailureAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.218.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"InsuranceQuotation-CICD-dev/Pipeline/BuildFailureAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.218.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"PipelinePipelineNotificationsD09EF7F8"}],"alarmDescription":"Alarm when build fails","alarmName":"insurance-quotation-build-failure-dev","tags":[{"key":"Application","value":"InsuranceQuotationAPI"},{"key":"Backup","value":"Optional"},{"key":"Component","value":"CICD"},{"key":"CostCenter","value":"Engineering"},{"key":"Environment","value":"dev"},{"key":"GitHubOwner","value":"peterboddev"},{"key":"GitHubRepo","value":"vibespacdemo"},{"key":"ManagedBy","value":"CDK"},{"key":"Owner","value":"DevOps"},{"key":"Project","value":"InsuranceQuotation"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"ProjectName","value":{"Ref":"PipelineBuildProject9D447FA8"}}],"evaluationPeriods":1,"metricName":"FailedBuilds","namespace":"AWS/CodeBuild","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"PipelineName":{"id":"PipelineName","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"PipelineArn":{"id":"PipelineArn","path":"InsuranceQuotation-CICD-dev/Pipeline/PipelineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"BuildProjectName":{"id":"BuildProjectName","path":"InsuranceQuotation-CICD-dev/Pipeline/BuildProjectName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"ArtifactBucketName":{"id":"ArtifactBucketName","path":"InsuranceQuotation-CICD-dev/Pipeline/ArtifactBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"NotificationTopicArn":{"id":"NotificationTopicArn","path":"InsuranceQuotation-CICD-dev/Pipeline/NotificationTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}}}},"Environment":{"id":"Environment","path":"InsuranceQuotation-CICD-dev/Environment","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"Region":{"id":"Region","path":"InsuranceQuotation-CICD-dev/Region","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"Account":{"id":"Account","path":"InsuranceQuotation-CICD-dev/Account","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.218.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"InsuranceQuotation-CICD-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"InsuranceQuotation-CICD-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.218.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"InsuranceQuotation-CICD-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.218.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"InsuranceQuotation-CICD-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.218.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}